<section class="hero">
  <div>
    <h3>Visión general del sistema</h3>
    <p>Controla la operación, coordina rutas y responde a incidentes en tiempo real.</p>
  </div>
  <button class="btn btn-primary">Generar reporte diario</button>
</section>

<section class="stats" *ngIf="resumen$ | async as resumen">
  <div class="card">
    <h4>Vehículos activos</h4>
    <strong>{{ resumen.vehiculosActivos }}</strong>
    <span class="muted">Flota en operación</span>
  </div>
  <div class="card">
    <h4>Retrasos</h4>
    <strong>{{ resumen.vehiculosRetrasados }}</strong>
    <span class="muted">Casos abiertos</span>
  </div>
  <div class="card">
    <h4>Puntualidad</h4>
    <strong>{{ resumen.tasaPuntualidad }}%</strong>
    <span class="muted">Últimas 24 horas</span>
  </div>
  <div class="card">
    <h4>Pasajeros</h4>
    <strong>{{ resumen.pasajerosHoy | number }}</strong>
    <span class="muted">Hoy</span>
  </div>
  <div class="card">
    <h4>Incidentes</h4>
    <strong>{{ resumen.incidenciasAbiertas }}</strong>
    <span class="muted">En seguimiento</span>
  </div>
</section>

<section class="grid">
  <div class="card map">
    <div class="map-header">
      <h4>Mapa en tiempo real</h4>
      <span class="muted">Actualiza cada 15 segundos</span>
    </div>
    <div class="map-body">
      <div class="map-overlay">
        <p>Integración con mapa GIS (placeholder)</p>
        <div class="chips" *ngIf="ubicaciones$ | async as ubicaciones">
          <span *ngFor="let ubicacion of ubicaciones">{{ ubicacion.id }}</span>
        </div>
      </div>
      <div class="map-grid"></div>
    </div>
  </div>

  <div class="card list">
    <div class="list-header">
      <h4>Flota en operación</h4>
      <span class="muted">Estado de vehículos</span>
    </div>
    <div class="list-body" *ngIf="vehiculos$ | async as vehiculos">
      <div class="row" *ngFor="let vehiculo of vehiculos">
        <div>
          <strong>{{ vehiculo.codigo }}</strong>
          <span>{{ vehiculo.ruta }}</span>
        </div>
        <span [class]="estadoBadge(vehiculo.estado)">{{ vehiculo.estado }}</span>
      </div>
    </div>
  </div>

  <div class="card list">
    <div class="list-header">
      <h4>Alertas recientes</h4>
      <span class="muted">Prioridad operativa</span>
    </div>
    <div class="list-body" *ngIf="alertas$ | async as alertas">
      <div class="row" *ngFor="let alerta of alertas">
        <div>
          <strong>{{ alerta.titulo }}</strong>
          <span>{{ alerta.descripcion }}</span>
        </div>
        <span class="badge" [class.badge-danger]="alerta.severidad === 'Alta'"
          [class.badge-warning]="alerta.severidad === 'Media'"
          [class.badge-success]="alerta.severidad === 'Baja'">
          {{ alerta.severidad }}
        </span>
      </div>
    </div>
  </div>
</section>
